(function(){var e,r;r=angular.module("tumblrGame.rounds"),e=function(){function e(e,r,t,n,o,a,c){var s,u,i;e.round=o.get("current_round"),e.type=c.type||"series",u=r.random_tag(e.type),e.correct=!1,e.guess="",i=new RegExp("^#?"+u.regex.source+"$","i"),s=t.fromPastMonths(12),n.jsonp_query({tag:u.name,before:s},function(r){return e.message=r.meta,e.posts=r.response}),e.$watch("guess",function(r){return r&&0!==r.length?(e.correct=-1!==r.search(i),e.correct):0}),e.$watch("correct",function(e){return e?(o.increment("current_round",1),a.transitionTo("end",{tag:u.name,before:s})):void 0})}return e.$inject=["$scope","TagsService","RandomDateService","RoundsRes","gameStorage","$state","$stateParams"],e}(),r.controller("RoundCtrl",e)}).call(this);