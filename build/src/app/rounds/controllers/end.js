(function(){var e,t;t=angular.module("tumblrGame.rounds"),e=function(){function e(e,t,o,r,n,s,a,i,u){e.round=n.get("current_round"),console.log("PARM: "+i.win),e.message="true"===i.win?"Correct! You win!":'Out of time! The answer was "'+i.tag+'"',o.jsonp_query({tag:"reaction-gif",before:i.before},function(t){var o;return o=s("filter")(t.response,{type:"photo"}),e.gif=o[0].photos[0].original_size.url}),e.posts=[],o.jsonp_query({tag:i.tag,before:i.before},function(t){var o,r,n,s,a;for(s=t.response,a=[],r=0,n=s.length;n>r;r++)if(o=s[r],"photo"===o.type){if(e.posts.push(o),e.posts.length>=6)break;a.push(void 0)}else a.push(void 0);return a}),e.play=function(){return a.transitionTo("select")},u.bindTo(e).add({combo:"enter",description:"Next Stage",callback:e.play})}return e.$inject=["$scope","$templateCache","RoundsRes","StoryService","gameStorage","$filter","$state","$stateParams","hotkeys"],e}(),t.controller("EndCtrl",e)}).call(this);